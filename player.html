<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>L√¥ T√¥ ƒê·∫°i C√°t - Ng∆∞·ªùi Ch∆°i</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* √âp to√†n b·ªô ·ª©ng d·ª•ng lu√¥n n·∫±m trong 1 m√†n h√¨nh, kh√¥ng c√≥ thanh cu·ªôn tr√¨nh duy·ªát */
        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden; 
        }
        body {
            display: flex;
            flex-direction: column;
            background-color: #5c0000;
        }
    </style>
</head>
<body class="font-sans antialiased text-amber-100">

<!-- 1. M√ÄN H√åNH ƒêƒÇNG NH·∫¨P -->
<div id="screen-join" class="flex-1 flex flex-col items-center justify-center p-4">
    <div class="bg-white p-8 rounded-3xl shadow-2xl w-full max-w-sm border-b-8 border-red-600">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-sigmar text-red-600 drop-shadow-sm uppercase leading-tight">L√¥ T√¥</h1>
            <p class="text-red-800 font-goldman tracking-widest text-sm uppercase">ƒê·∫°i C√°t ƒê·∫°i L·ª£i</p>
        </div>
        <div class="space-y-4">
            <div>
                <label class="text-[12px] font-black text-red-900 uppercase ml-1">T√™n c·ªßa b·∫°n</label>
                <input type="text" id="input-name" placeholder="V√≠ d·ª•: Anh Ba Kh√≠a" class="w-full p-4 bg-slate-50 border-2 border-slate-200 rounded-2xl text-slate-900 font-bold outline-none">
            </div>
            <div>
                <label class="text-[12px] font-black text-red-900 uppercase ml-1">M√£ ph√≤ng</label>
                <input type="number" id="input-room" placeholder="6 ch·ªØ s·ªë" class="w-full p-4 bg-slate-50 border-2 border-slate-200 rounded-2xl text-slate-900 font-bold outline-none">
            </div>
            <button onclick="handleJoinRoom()" class="w-full bg-red-600 text-white font-sigmar text-xl py-4 rounded-2xl shadow-lg transform active:scale-95 transition-all">V√ÄO PH√íNG</button>
        </div>
    </div>
    <div class="mt-8 flex flex-col items-center gap-2">             
        <div class="text-yellow-400 font-bold text-sm uppercase tracking-widest font-goldman">Xu√¢n B√≠nh Ng·ªç 2026</div>
	<img src="assets/logo.png" alt="Logo" class="h-14 md:h-24 w-auto drop-shadow-lg mt-2">
    </div>
</div>

<!-- 2. M√ÄN H√åNH CH·ªåN V√â -->
<div id="screen-selection" class="hidden h-full flex flex-col overflow-hidden relative">
    
    <!-- L·ªöP PH·ª¶ CH·ªú NH√Ä C√ÅI (Che to√†n b·ªô ƒë·ªÉ kh√≥a n√∫t b·∫•m) -->
    <div id="selection-waiting-overlay" class="absolute inset-0 z-50 bg-red-950/95 backdrop-blur-md flex flex-col items-center justify-center text-center p-6">
        <!-- Hi·ªáu ·ª©ng l√¨ x√¨ nh·∫£y m√∫a -->
        <div class="text-8xl mb-6 animate-bounce">üßß</div>
        <h3 class="text-3xl font-sigmar text-yellow-400 drop-shadow-lg">XIN CH·ªú GI√ÇY L√ÅT</h3>
        <div class="w-16 h-1 bg-yellow-500 my-4 rounded-full"></div>
        <p class="text-yellow-100 text-lg font-medium italic">
            Nh√† c√°i ƒëang chu·∫©n b·ªã v√© cho b·∫°n...
        </p>
        <p class="text-yellow-600 text-xs mt-4 uppercase tracking-widest animate-pulse">
            Vui l√≤ng kh√¥ng t·∫£i l·∫°i trang
        </p>
    </div>

    <!-- Header ch·ªçn v√© (N·∫±m d∆∞·ªõi l·ªõp ph·ªß n√™n s·∫Ω b·ªã kh√≥a) -->
    <div class="shrink-0 bg-red-800 border-b-4 border-yellow-500 p-6 shadow-2xl flex flex-col items-center gap-4">
        <h2 class="text-2xl font-sigmar text-yellow-400 uppercase">Ch·ªçn v√© may m·∫Øn</h2>
        <div class="flex gap-4">
            <button onclick="renderNewSheet()" class="bg-red-900 border border-yellow-600 text-yellow-400 px-6 py-2 rounded-xl font-bold">üîÑ CH·ªåN/ ƒê·ªîI B·ªò V√â</button>
            <button onclick="confirmTickets()" class="bg-yellow-500 text-red-950 font-black px-8 py-2 rounded-xl shadow-md uppercase">Ch∆°i ngay</button>
        </div>
        <p class="text-[12px] font-bold text-yellow-200 uppercase tracking-widest">H·∫°n m·ª©c: <span id="max-ticket-display" class="text-white text-lg mx-1">0</span> v√©</p>
    </div>

    <!-- V√πng ch·ª©a v√© -->
    <div id="sheet-container" class="flex-1 overflow-y-auto p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 items-start no-scrollbar">
        <!-- JS Render -->
    </div>

    <!-- Logo Footer -->
    <div class="shrink-0 p-4 flex flex-col items-center bg-black/20">
	<img src="assets/logo.png" alt="Logo" class="h-10 md:h-20 w-auto drop-shadow-lg">
    </div>
</div>

    <!-- 3. M√ÄN H√åNH CH∆†I GAME (ƒê√É √âP KHUNG 1 M√ÄN H√åNH) -->
    <div id="screen-game" class="hidden h-full flex flex-col overflow-hidden">
        
        <!-- Header Game: Logo to & S·ªë nh·ªè -->
        <header class="shrink-0 bg-red-800 border-b-4 border-yellow-500 p-3 shadow-2xl">
            <div class="max-w-6xl mx-auto flex items-center justify-between px-2">
                <!-- Logo to b√™n tr√°i -->
                <div class="flex-1">
                    <img src="assets/logo.png" alt="Logo" class="h-10 md:h-20 w-auto drop-shadow-lg">
                </div>

                <!-- S·ªë hi·ªán t·∫°i thu nh·ªè b√™n ph·∫£i -->
                <div class="flex flex-col items-center bg-red-900/60 py-1 px-4 rounded-xl border-2 border-yellow-600 shadow-inner">
                    <span class="text-[12px] font-black text-yellow-500 uppercase tracking-tighter">S·ªë hi·ªán t·∫°i</span>
                    <div id="display-current-num" class="text-4xl md:text-5xl font-sigmar text-white leading-none">--</div>
                </div>
            </div>
        </header>
        <!-- C·ª•m n√∫t ƒëi·ªÅu ch·ªânh √¢m thanh v√† ch·∫ø ƒë·ªô d√≤ -->
<div class="shrink-0 px-4 py-2 bg-red-950/30 border-b border-yellow-900/20 backdrop-blur-sm">
    <div class="max-w-6xl mx-auto flex flex-wrap justify-end items-center gap-x-4 gap-y-1">
        <!-- 1. Nh·∫°c n·ªÅn -->
        <div class="flex items-center gap-1">
            <span class="text-[9px] font-black text-yellow-600 uppercase">Nh·∫°c T·∫øt</span>
            <label class="relative inline-flex items-center cursor-pointer scale-75">
                <input type="checkbox" id="music-toggle" class="sr-only peer" onchange="toggleMusic()">
                <div class="w-10 h-5 bg-slate-700 rounded-full peer peer-checked:bg-emerald-500 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-5"></div>
            </label>
        </div>
        <!-- 2. Gi·ªçng ƒë·ªçc -->
        <div class="flex items-center gap-1">
            <span class="text-[9px] font-black text-yellow-600 uppercase">Gi·ªçng ƒë·ªçc</span>
            <label class="relative inline-flex items-center cursor-pointer scale-75">
                <input type="checkbox" id="voice-toggle" checked class="sr-only peer">
                <div class="w-10 h-5 bg-slate-700 rounded-full peer peer-checked:bg-yellow-500 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-5"></div>
            </label>
        </div>
        <!-- 3. Ch·∫ø ƒë·ªô D√≤ -->
        <div class="flex items-center gap-1">
            <span id="mode-label" class="text-[9px] font-black text-yellow-500 uppercase">D√≤ T·ª± ƒê·ªông</span>
            <label class="relative inline-flex items-center cursor-pointer scale-75">
                <input type="checkbox" id="auto-toggle" class="sr-only peer" onchange="toggleAutoMode()">
                <div class="w-10 h-5 bg-slate-700 rounded-full peer peer-checked:bg-green-600 after:content-[''] after:absolute after:top-0.5 after:left-0.5 after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:after:translate-x-5"></div>
            </label>
        </div>
    </div>
</div>

        <!-- V√ôNG V√â D√í: T·ª∞ CO GI√ÉN V√Ä CU·ªòN B√äN TRONG -->
<!-- Thay ƒë·ªïi class lg:grid-cols-2 th√†nh md:grid-cols-2 -->
<!-- md l√† d√†nh cho m√°y t√≠nh b·∫£ng (768px tr·ªü l√™n) -->
<main id="my-game-tickets" class="flex-1 overflow-y-auto px-4 py-1 grid grid-cols-1 md:grid-cols-2 gap-4 no-scrollbar min-h-0">
    <!-- Render b·ªüi JS -->
</main>
        <!-- FOOTER: N√öT KINH C·ªê ƒê·ªäNH, KH√îNG ƒê√à V√â -->
        <footer class="shrink-0 p-4 bg-gradient-to-t from-red-950 to-transparent flex justify-center">
            <button onclick="callKinh()" 
                class="w-full max-w-md bg-gradient-to-r from-red-600 to-red-800 text-white font-sigmar text-3xl py-4 rounded-2xl shadow-2xl border-4 border-yellow-400 active:scale-95 transition-all uppercase tracking-widest">
                KINH !!!
            </button>
        </footer>
    </div>

    <!-- C√ÅC TH√ÄNH PH·∫¶N N·ªîI (MODALS & TOAST) -->
    <div id="toast" class="fixed top-20 left-1/2 -translate-x-1/2 z-50 hidden bg-yellow-500 text-red-950 px-6 py-3 rounded-full font-black shadow-2xl border-2 border-yellow-200 animate-bounce"></div>

    <div id="announcement-modal" class="fixed inset-0 bg-black/80 z-[100] flex items-center justify-center hidden p-6 backdrop-blur-md">
        <div class="bg-white border-4 border-red-600 p-8 rounded-[2rem] text-center max-w-sm w-full shadow-2xl">
            <div id="announce-icon" class="text-6xl mb-4 animate-bounce">üîî</div>
            <h2 id="announce-title" class="text-2xl font-sigmar text-red-600 mb-2 italic uppercase">ƒêANG H√î KINH!</h2>
            <p id="announce-msg" class="text-slate-700 font-bold mb-6">ƒêang ki·ªÉm tra s·ªë...</p>
            <button id="btn-close-announce" onclick="closeAnnounce()" class="hidden w-full bg-red-600 text-white font-bold py-3 rounded-xl uppercase">ƒê√≥ng</button>
        </div>
    </div>

<!-- Nh·∫°c n·ªÅn Xu√¢n (Link v√≠ d·ª• nh·∫°c kh√¥ng b·∫£n quy·ªÅn) -->
<audio id="bg-music" loop>
    <source src="assets/nhacxuan.mp3" type="audio/mpeg">
</audio>

    <!-- Scripts -->
    <script src="js/firebase-config.js"></script>
    <script src="js/loto-logic.js"></script>
    <script src="js/player.js"></script>
</body>

</html>


