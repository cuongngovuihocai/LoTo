/* --- PHÔNG CHỮ & BIẾN MÀU SẮC --- */
@import url('https://fonts.googleapis.com/css2?family=Goldman&family=Sigmar+One&display=swap');

:root {
    --do-do: #5c0000;
    --do-tuoi: #dc2626;
    --vang-gold: #facc15;
    --vang-dam: #a16207;
    --trang-nga: #fef3c7;
    --den-vien: #000000;
    --do-vien-ngoai: #450a0a;
}

/* --- CẤU TRÚC CƠ BẢN --- */
html, body {
    height: 100%;
    margin: 0;
    background-color: var(--do-do);
    /* Họa tiết nền chấm bi chìm */
    background-image: radial-gradient(#800000 1px, transparent 0);
    background-size: 40px 40px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: var(--trang-nga);
    /* Ngăn cuộn trang trên mobile để tạo cảm giác App */
    overflow: hidden; 
    display: flex;
    flex-direction: column;
}

.font-sigmar { font-family: 'Sigmar One', cursive; }
.font-goldman { font-family: 'Goldman', display; }

/* --- 1. CÁC THÀNH PHẦN CHUNG (Utility) --- */

/* Ẩn thanh cuộn nhưng vẫn cho phép cuộn */
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

/* Hiệu ứng nút bấm chung */
button { transition: all 0.2s ease; cursor: pointer; }
button:active { transform: scale(0.95); }

/* --- 2. HIỆU ỨNG ANIMATION --- */

/* Fade In: Dùng cho trang chủ (Index) */
@keyframes fade-in {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
.animate-fade-in { animation: fade-in 1s ease-out; }

/* Popcorn: Dùng cho lồng cầu quay số (Host) */
/* Bóng sẽ di chuyển ngẫu nhiên dựa trên biến --x, --y được gán từ JS */
@keyframes popcorn {
    0% { transform: translate(0, 0); }
    25% { transform: translate(calc(var(--x1) * 1px), calc(var(--y1) * 1px)); }
    50% { transform: translate(calc(var(--x2) * 1px), calc(var(--y2) * 1px)); }
    75% { transform: translate(calc(var(--x3) * 1px), calc(var(--y3) * 1px)); }
    100% { transform: translate(0, 0); }
}
.animate-popcorn {
    animation: popcorn 0.5s infinite linear;
}

/* Missed Flash: Nhấp nháy khi người chơi dò sót số */
@keyframes missed-flash {
    0%, 100% { background-color: rgba(250, 204, 21, 0.3); }
    50% { background-color: rgba(250, 204, 21, 0.7); }
}
.missed-pulse {
    animation: missed-flash 1.5s infinite;
}

/* Ball Pop: Hiệu ứng số nảy ra khi vừa xổ */
.ball-pop {
    animation: ball-appear 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
@keyframes ball-appear {
    0% { transform: scale(0); opacity: 0; }
    80% { transform: scale(1.2); opacity: 1; }
    100% { transform: scale(1); }
}

/* --- 3. GIAO DIỆN LỒNG CẦU (HOST) --- */

.number-cell {
    background: #450a0a;
    border: 2px solid var(--vang-dam);
    color: var(--vang-gold);
    aspect-ratio: 1/1;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    border-radius: 0.5rem;
    font-size: 0.9rem;
}

.number-cell.active {
    background: linear-gradient(135deg, var(--vang-gold), #fbbf24, var(--vang-dam));
    color: #450a0a;
    border-color: #ffffff;
    box-shadow: 0 0 15px rgba(250, 204, 21, 0.8);
    transform: scale(1.1) rotate(2deg);
    z-index: 10;
}

/* Quả bóng trong lồng cầu */
.cage-ball {
    position: absolute;
    width: 1rem;  /* w-4 */
    height: 1rem; /* h-4 */
    border-radius: 9999px;
    border: 1px solid rgba(0,0,0,0.2);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    /* Màu nền sẽ được JS gán dynamic */
}

/* --- 4. GIAO DIỆN VÉ & GRID (PLAYER) --- */

/* Container chứa vé: Dùng chung cho Sảnh chọn và Bàn chơi */
#sheet-container, #my-game-tickets {
    /* Quan trọng: Cho phép cuộn dọc */
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch;
    
    display: grid;
    /* Mặc định PC: 3 cột */
    grid-template-columns: repeat(3, 1fr); 
    gap: 20px;
    padding: 20px;
    align-items: start; /* Giúp vé không bị kéo giãn chiều cao */
}

/* Ô số trên vé */
.loto-cell {
    aspect-ratio: 1 / 1; 
    display: flex;
    align-items: center;
    justify-content: center;
    border-right: 2.5px solid #000000;
    position: relative;
    background-color: #fdfdfd;
    cursor: pointer;
}
.loto-cell:last-child { border-right: none; }

/* Vòng tròn chứa số bên trong ô */
.cell-num-box {
    width: 85%;
    height: 85%;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 900;
    font-size: 24px;
    transition: all 0.2s;
}

/* Vé được chọn ở sảnh (có viền vàng) */
.mini-ticket-box.selected {
    border: 3px solid #facc15 !important;
    box-shadow: 0 0 15px #facc15;
    transform: scale(1.02);
}

/* --- 5. RESPONSIVE DESIGN (QUAN TRỌNG) --- */

/* Tablet & iPad (Dưới 1024px) */
@media (max-width: 1024px) {
    #sheet-container, #my-game-tickets {
        grid-template-columns: repeat(2, 1fr); /* Chuyển thành 2 cột */
        gap: 10px;
        padding: 10px;
    }
    .cell-num-box { font-size: 14px; }
}

/* Mobile (Dưới 768px) */
@media (max-width: 768px) {
    /* Vẫn giữ 2 cột nhưng thu hẹp khoảng cách */
    #sheet-container, #my-game-tickets {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 6px !important;
        padding: 6px !important;
    }
    
    /* Thu nhỏ chữ để vừa ô */
    .cell-num-box {
        font-size: 10px !important; 
    }
    
    /* Thu nhỏ header của vé */
    .ticket-header-text {
        font-size: 9px !important;
        padding: 2px 4px !important;
    }

    /* ===================================================
       THÊM MỚI: GIẢM VIỀN VÉ CHO MÀN HÌNH ĐIỆN THOẠI 
       =================================================== */
       
    /* 1. Màn hình SẢNH CHỌN VÉ: Giảm viền ngoài của vé xuống còn 1px */
    .mini-ticket-box {
        border-width: 1px !important;
    }

    /* 2. Màn hình TRONG TRẬN (Dò vé): Giảm viền trắng cực dày (6px) xuống còn 2px */
    #my-game-tickets > div {
        border-width: 2px !important; 
        border-radius: 8px !important; /* Bo góc nhỏ lại cho hài hòa với viền mỏng */
    }
    
    /* Làm mỏng viền đen bên trong các ô số cho đỡ rối mắt trên mobile */
    .loto-cell {
        border-right-width: 1px !important;
    }
    
    /* Bỏ class cũ không còn tác dụng */
    /* .loto-ticket { border-width: 2px; } */
}